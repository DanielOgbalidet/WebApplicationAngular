{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../houses.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../../shared/convertPipe\";\nconst _c0 = [\"startDateInput\"];\nconst _c1 = [\"endDateInput\"];\nfunction DetailsComponent_div_2_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"img\", 22);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"alt\", ctx_r1.newHouse.ImageUrl);\n    i0.ɵɵproperty(\"src\", ctx_r1.baseImgUrl + \"noimg.jpg\", i0.ɵɵsanitizeUrl);\n  }\n}\nfunction DetailsComponent_div_2_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"img\", 22);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"alt\", ctx_r2.newHouse.ImageUrl);\n    i0.ɵɵproperty(\"src\", ctx_r2.baseImgUrl + ctx_r2.newHouse.Address[0], i0.ɵɵsanitizeUrl);\n  }\n}\nfunction DetailsComponent_div_2_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"img\", 23);\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction DetailsComponent_div_2_span_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 24, 25);\n    i0.ɵɵtext(2, \" The start date must be earlier than end date \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DetailsComponent_div_2_tr_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 26)(1, \"th\")(2, \"p\");\n    i0.ɵɵelement(3, \"i\", 27);\n    i0.ɵɵtext(4, \" Number of nights:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"td\")(6, \"p\", 28);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r7.numberOfNights);\n  }\n}\nfunction DetailsComponent_div_2_tr_57_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 26)(1, \"th\")(2, \"p\");\n    i0.ɵɵelement(3, \"i\", 29);\n    i0.ɵɵtext(4, \" TOTAL PRICE: \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"td\")(6, \"p\", 30);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(8, \"input\", 31);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r8.totalPrice);\n  }\n}\nfunction DetailsComponent_div_2_tr_58_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 26)(1, \"td\")(2, \"button\", 32);\n    i0.ɵɵtext(3, \"Order\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction DetailsComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"div\", 4);\n    i0.ɵɵtemplate(3, DetailsComponent_div_2_ng_container_3_Template, 2, 2, \"ng-container\", 5);\n    i0.ɵɵtemplate(4, DetailsComponent_div_2_ng_container_4_Template, 2, 2, \"ng-container\", 5);\n    i0.ɵɵtemplate(5, DetailsComponent_div_2_ng_container_5_Template, 2, 0, \"ng-container\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 6)(7, \"div\", 7)(8, \"h1\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\", 8);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"h3\");\n    i0.ɵɵtext(13);\n    i0.ɵɵpipe(14, \"convertCurrency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"table\", 9)(16, \"tbody\")(17, \"tr\")(18, \"th\");\n    i0.ɵɵelement(19, \"i\", 10);\n    i0.ɵɵtext(20, \" Bedrooms:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"td\");\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"tr\")(24, \"th\");\n    i0.ɵɵelement(25, \"i\", 11);\n    i0.ɵɵtext(26, \" Guests:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"td\");\n    i0.ɵɵtext(28);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(29, \"tr\")(30, \"th\");\n    i0.ɵɵelement(31, \"i\", 12);\n    i0.ɵɵtext(32, \" Owner:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(33, \"td\");\n    i0.ɵɵtext(34);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(35, \"div\", 13)(36, \"div\", 14)(37, \"h3\");\n    i0.ɵɵtext(38, \"Choose dates and order here!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(39, \"table\", 9)(40, \"tbody\")(41, \"tr\")(42, \"th\");\n    i0.ɵɵtext(43, \"FROM:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(44, \"th\");\n    i0.ɵɵtext(45, \"TO:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(46, \"tr\")(47, \"td\")(48, \"input\", 15, 16);\n    i0.ɵɵlistener(\"change\", function DetailsComponent_div_2_Template_input_change_48_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.updateDays());\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(50, \"td\")(51, \"input\", 17, 18);\n    i0.ɵɵlistener(\"change\", function DetailsComponent_div_2_Template_input_change_51_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.updateDays());\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(53, \"tr\", 19)(54, \"td\");\n    i0.ɵɵtemplate(55, DetailsComponent_div_2_span_55_Template, 3, 0, \"span\", 20);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(56, DetailsComponent_div_2_tr_56_Template, 8, 1, \"tr\", 21);\n    i0.ɵɵtemplate(57, DetailsComponent_div_2_tr_57_Template, 9, 1, \"tr\", 21);\n    i0.ɵɵtemplate(58, DetailsComponent_div_2_tr_58_Template, 4, 0, \"tr\", 21);\n    i0.ɵɵelementEnd()()()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.numberOfFiles === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.numberOfFiles === 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.numberOfFiles > 1);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.newHouse.Address);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.newHouse.Description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(14, 19, ctx_r0.newHouse.Price, \"kr.\"));\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate(ctx_r0.newHouse.Bedrooms);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r0.newHouse.Guests);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate3(\"\", ctx_r0.newHouse.User.FirstName, \" \", ctx_r0.newHouse.User.LastName, \", \", ctx_r0.newHouse.User.Email, \" \");\n    i0.ɵɵadvance(14);\n    i0.ɵɵproperty(\"value\", ctx_r0.startDateMin)(\"min\", ctx_r0.startDateMin);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"min\", ctx_r0.endDateMinString)(\"value\", ctx_r0.endDateMinString);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.invalidDates);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.invalidDates);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.invalidDates);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.invalidDates);\n  }\n}\nexport class DetailsComponent {\n  constructor(_router, _houseService, _route) {\n    this._router = _router;\n    this._houseService = _houseService;\n    this._route = _route;\n    this.startDateMin = new Date().toISOString().split('T')[0]; // Current date in YYYY-MM-DD format\n    this.endDateMin = new Date(this.startDateMin);\n    this.endDateMinString = '';\n    this.newHouse = {}; // Adjust the type according to your house object structure\n    this.newUser = {};\n    this.houseId = -1;\n    this.numberOfNights = 1;\n    this.totalPrice = 0;\n    this.invalidDates = false;\n    this.numberOfFiles = 0;\n    this.baseImgUrl = \"/assets/images/\";\n  }\n  ngOnInit() {\n    this._route.params.subscribe(params => {\n      this.houseId = +params['id'];\n      this.getHouse(this.houseId);\n      console.log(\"Address to le house: \", this.newHouse.Address);\n      this.endDateMin.setDate(this.endDateMin.getDate() + 1); // Add one day\n      this.endDateMinString = new Date(this.endDateMin).toISOString().split('T')[0]; // Current date in YYYY-MM-DD format\n    });\n  }\n\n  getHouse(houseId) {\n    this._houseService.getHouseById(houseId).subscribe(house => {\n      console.log('retreived house: ', house);\n      console.log('retreived user: ', house.user);\n      this.newHouse = house;\n      this.newHouse.User = house.user;\n      this.totalPrice = this.newHouse.Price;\n      // this.updateDays();\n      this.getNumberOfFiles(this.newHouse.Address);\n      console.log(\"New House: \", this.newHouse);\n    }, error => {\n      console.error('Error loading house for edit: ', error);\n    });\n  }\n  getNumberOfFiles(address) {\n    if (this.newHouse && this.newHouse.Address) {\n      this._houseService.getNumberOfFiles(this.newHouse.Address).subscribe(count => {\n        this.numberOfFiles = count;\n        console.log(\"Number of images: \", count);\n      });\n    }\n  }\n  isObjectEmpty(obj) {\n    return Object.keys(obj).length === 0;\n  }\n  // Function to handle date changes in the order area\n  updateDays() {\n    const startDateValue = this.startDateInput.nativeElement.value;\n    const endDateValue = this.endDateInput.nativeElement.value;\n    const newstartDate = new Date(startDateValue);\n    const newendDate = new Date(endDateValue);\n    // Calculate the difference in milliseconds\n    const differenceInMs = newendDate.getTime() - newstartDate.getTime();\n    // Convert milliseconds to days\n    const differenceInDays = Math.ceil(differenceInMs / (1000 * 60 * 60 * 24));\n    // Check if the date difference is negative, if it is, type out error message\n    if (differenceInDays <= 0) {\n      this.invalidDates = true;\n      this.totalPrice = 0;\n      this.numberOfNights = 0;\n    } else {\n      // Change the values on the screen if values are valid\n      this.invalidDates = false;\n      this.totalPrice = differenceInDays * this.newHouse.Price;\n      this.numberOfNights = differenceInDays;\n    }\n    console.log(\"Date update\");\n    console.log(\"Start date\", startDateValue);\n    console.log(\"End date\", endDateValue);\n    console.log('Difference in days:', differenceInDays);\n  }\n}\nDetailsComponent.ɵfac = function DetailsComponent_Factory(t) {\n  return new (t || DetailsComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.HouseService), i0.ɵɵdirectiveInject(i1.ActivatedRoute));\n};\nDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DetailsComponent,\n  selectors: [[\"app-details\"]],\n  viewQuery: function DetailsComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.startDateInput = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.endDateInput = _t.first);\n    }\n  },\n  decls: 3,\n  vars: 1,\n  consts: [[\"rel\", \"stylesheet\", \"href\", \"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css\"], [\"class\", \"container-fluid\", \"id\", \"details_container\", 4, \"ngIf\"], [\"id\", \"details_container\", 1, \"container-fluid\"], [1, \"row\"], [\"id\", \"image-part\", 1, \"col-11\", \"col-lg-6\", \"col-md-11\"], [4, \"ngIf\"], [\"id\", \"info-part\", 1, \"col-11\", \"col-lg-6\", \"col-md-11\"], [1, \"inner-card\"], [\"id\", \"description-text\"], [1, \"table\", \"table-borderless\"], [1, \"bi\", \"bi-door-open\"], [1, \"bi\", \"bi-people\"], [1, \"bi\", \"bi-person\"], [1, \"inner\"], [1, \"card\"], [\"type\", \"date\", \"id\", \"startDate\", \"name\", \"trip_start\", \"max\", \"2025-12-31\", 3, \"value\", \"min\", \"change\"], [\"startDateInput\", \"\"], [\"type\", \"date\", \"id\", \"endDate\", \"name\", \"trip_end\", \"max\", \"2025-12-31\", 3, \"min\", \"value\", \"change\"], [\"endDateInput\", \"\"], [\"id\", \"validate\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [\"class\", \"info\", 4, \"ngIf\"], [2, \"max-width\", \"100%\", 3, \"src\", \"alt\"], [\"src\", \"/123\", \"alt\", \"mange filer\"], [1, \"text-danger\"], [\"validationText\", \"\"], [1, \"info\"], [1, \"bi\", \"bi-cloud-sun\"], [\"id\", \"nightsNr\"], [1, \"bi\", \"bi-cash-coin\"], [\"id\", \"totalPrice\"], [\"type\", \"hidden\", \"name\", \"inTotalPrice\", \"id\", \"inTotalPrice\"], [\"id\", \"makeOrder\", 1, \"btn\", \"btn-primary\"]],\n  template: function DetailsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"head\");\n      i0.ɵɵelement(1, \"link\", 0);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(2, DetailsComponent_div_2_Template, 59, 22, \"div\", 1);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isObjectEmpty(ctx.newHouse));\n    }\n  },\n  dependencies: [i3.NgIf, i4.ConvertCurrency],\n  styles: [\"h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%] {\\n  font-weight: bold;\\n}\\n\\n#image-part[_ngcontent-%COMP%] {\\n  height: 100%;\\n  min-height: 100%;\\n  max-height: 100%;\\n  width: 50%;\\n  min-width: 50%;\\n  max-width: 50%;\\n}\\n\\n#info-part[_ngcontent-%COMP%] {\\n  height: 100%;\\n  min-height: 100%;\\n  max-height: 100%;\\n  width: 50%;\\n  min-width: 50%;\\n  max-width: 50%;\\n}\\n\\n.card[_ngcontent-%COMP%] {\\n  padding: 3%;\\n  height: 100%;\\n  justify-content: center;\\n}\\n\\nth[_ngcontent-%COMP%] {\\n  padding-left: 0px;\\n}\\n\\n#description-text[_ngcontent-%COMP%] {\\n  margin-top: 2vh;\\n  margin-bottom: 4vh;\\n}\\n\\n.table[_ngcontent-%COMP%]    > [_ngcontent-%COMP%]:not(caption)    > *[_ngcontent-%COMP%]    > *[_ngcontent-%COMP%] {\\n  padding-left: 0;\\n  background-color: var(--bs-table-bg);\\n  box-shadow: inset 0 0 0 9999px var(--bs-table-accent-bg);\\n  padding-right: 0.5rem;\\n  padding-top: 1rem;\\n  padding-bottom: 1rem;\\n}\\n\\n.info-part[_ngcontent-%COMP%] {\\n  height: 100%;\\n}\\n\\n#makeOrder[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n#details_container[_ngcontent-%COMP%] {\\n  padding-right: 5vw;\\n  padding-top: 3%;\\n  padding-left: 0vw;\\n  padding-right: 5vw;\\n  padding-bottom: 5vh;\\n  margin-right: 2vw;\\n  margin-left: 2vw;\\n  width: 100%;\\n}\\n\\n#bottom-card[_ngcontent-%COMP%] {\\n  margin-top: 5vh;\\n}\\n\\n.inner[_ngcontent-%COMP%] {\\n  margin-top: 2vh;\\n}\\n\\ninner-card[_ngcontent-%COMP%] {\\n  margin-top: 0px;\\n}\\n\\n\\n@media only screen and (max-width: 992px) {\\n  h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%] {\\n    margin-top: 2vh;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvaG91c2VzL0RldGFpbHMvZGV0YWlscy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsWUFBWTtFQUNaLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIsVUFBVTtFQUNWLGNBQWM7RUFDZCxjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsWUFBWTtFQUNaLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIsVUFBVTtFQUNWLGNBQWM7RUFDZCxjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsV0FBVztFQUNYLFlBQVk7RUFDWix1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSxpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxlQUFlO0VBQ2Ysa0JBQWtCO0FBQ3BCO0FBQ0EsMkRBQTJEO0FBQzNEO0VBQ0UsZUFBZTtFQUNmLG9DQUFvQztFQUNwQyx3REFBd0Q7RUFDeEQscUJBQXFCO0VBQ3JCLGlCQUFpQjtFQUNqQixvQkFBb0I7QUFDdEI7O0FBRUE7RUFDRSxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtBQUNkOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLGVBQWU7RUFDZixpQkFBaUI7RUFDakIsa0JBQWtCO0VBQ2xCLG1CQUFtQjtFQUNuQixpQkFBaUI7RUFDakIsZ0JBQWdCO0VBQ2hCLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsZUFBZTtBQUNqQjs7QUFFQSxxREFBcUQ7QUFDckQ7RUFDRTtJQUNFLGVBQWU7RUFDakI7QUFDRiIsInNvdXJjZXNDb250ZW50IjpbImgxLCBoMyB7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xufVxuXG4jaW1hZ2UtcGFydCB7XG4gIGhlaWdodDogMTAwJTtcbiAgbWluLWhlaWdodDogMTAwJTtcbiAgbWF4LWhlaWdodDogMTAwJTtcbiAgd2lkdGg6IDUwJTtcbiAgbWluLXdpZHRoOiA1MCU7XG4gIG1heC13aWR0aDogNTAlO1xufVxuXG4jaW5mby1wYXJ0IHtcbiAgaGVpZ2h0OiAxMDAlO1xuICBtaW4taGVpZ2h0OiAxMDAlO1xuICBtYXgtaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogNTAlO1xuICBtaW4td2lkdGg6IDUwJTtcbiAgbWF4LXdpZHRoOiA1MCU7XG59XG5cbi5jYXJkIHtcbiAgcGFkZGluZzogMyU7XG4gIGhlaWdodDogMTAwJTtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbnRoIHtcbiAgcGFkZGluZy1sZWZ0OiAwcHg7XG59XG5cbiNkZXNjcmlwdGlvbi10ZXh0IHtcbiAgbWFyZ2luLXRvcDogMnZoO1xuICBtYXJnaW4tYm90dG9tOiA0dmg7XG59XG4vKiBSZW1vdmUgcGFkZGluZy1sZWZ0IG9uIHRoZSB0YWJsZXMsIGZvciBiZXR0ZXIgYWxpZ25tZW50Ki9cbi50YWJsZSA+IDpub3QoY2FwdGlvbikgPiAqID4gKiB7XG4gIHBhZGRpbmctbGVmdDogMDtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnMtdGFibGUtYmcpO1xuICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggdmFyKC0tYnMtdGFibGUtYWNjZW50LWJnKTtcbiAgcGFkZGluZy1yaWdodDogMC41cmVtO1xuICBwYWRkaW5nLXRvcDogMXJlbTtcbiAgcGFkZGluZy1ib3R0b206IDFyZW07XG59XG5cbi5pbmZvLXBhcnQge1xuICBoZWlnaHQ6IDEwMCU7XG59XG5cbiNtYWtlT3JkZXIge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuXG4jZGV0YWlsc19jb250YWluZXIge1xuICBwYWRkaW5nLXJpZ2h0OiA1dnc7XG4gIHBhZGRpbmctdG9wOiAzJTtcbiAgcGFkZGluZy1sZWZ0OiAwdnc7XG4gIHBhZGRpbmctcmlnaHQ6IDV2dztcbiAgcGFkZGluZy1ib3R0b206IDV2aDtcbiAgbWFyZ2luLXJpZ2h0OiAydnc7XG4gIG1hcmdpbi1sZWZ0OiAydnc7XG4gIHdpZHRoOiAxMDAlO1xufVxuXG4jYm90dG9tLWNhcmQge1xuICBtYXJnaW4tdG9wOiA1dmg7XG59XG5cbi5pbm5lciB7XG4gIG1hcmdpbi10b3A6IDJ2aDtcbn1cblxuaW5uZXItY2FyZCB7XG4gIG1hcmdpbi10b3A6IDBweDtcbn1cblxuLyogTWVkaWEgcXVlcnkgZm9yIHdoZW4gc2NyZWVuIGlzIHNtYWxsZXIgdGhhbiA5OTJweCovXG5AbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDk5MnB4KSB7XG4gIGgxLCBoMyB7XG4gICAgbWFyZ2luLXRvcDogMnZoO1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","DetailsComponent","constructor","_router","_houseService","_route","Date","toISOString","split","startDateMin","baseImgUrl","ngOnInit","params","subscribe","houseId","getHouse","console","log","newHouse","Address","endDateMin","setDate","getDate","endDateMinString","getHouseById","house","user","User","totalPrice","Price","getNumberOfFiles","error","address","count","numberOfFiles","isObjectEmpty","obj","Object","keys","length","updateDays","startDateValue","startDateInput","nativeElement","value","endDateValue","endDateInput","newstartDate","newendDate","differenceInMs","getTime","differenceInDays","Math","ceil","invalidDates","numberOfNights","selectors","viewQuery"],"sourceRoot":"","sources":["/Users/Hjemmebruker/Desktop/WebApplicationAngular/ClientApp/src/app/houses/Details/details.component.html","/Users/Hjemmebruker/Desktop/WebApplicationAngular/ClientApp/src/app/houses/Details/details.component.ts"],"sourcesContent":["<head>\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css\" />\n</head>\n\n<div class=\"container-fluid\" id=\"details_container\" *ngIf=\"!isObjectEmpty(newHouse)\">\n    <div class=\"row\">\n        <div id=\"image-part\" class=\"col-11 col-lg-6 col-md-11\">\n            <ng-container *ngIf=\"numberOfFiles === 0\">\n                <img [src]=\"(baseImgUrl + 'noimg.jpg')\" alt=\"{{ newHouse.ImageUrl }}\" style=\"max-width: 100%;\">\n            </ng-container>\n            <ng-container *ngIf=\"numberOfFiles === 1\">\n                <img [src]=\"(baseImgUrl + newHouse.Address[0])\" alt=\"{{ newHouse.ImageUrl }}\" style=\"max-width: 100%;\">\n            </ng-container>\n            <ng-container *ngIf=\"numberOfFiles > 1\">\n                <img src=\"/123\" alt=\"mange filer\" />\n            </ng-container>\n        </div>\n        <div id=\"info-part\" class=\"col-11 col-lg-6 col-md-11\">\n            <div class=\"inner-card\">\n                <h1>{{ newHouse.Address }}</h1>\n                <p id=\"description-text\">{{ newHouse.Description }}</p>\n                <h3>{{ newHouse.Price | convertCurrency : 'kr.' }}</h3>\n                <table class=\"table table-borderless\">\n                    <tbody>\n                        <tr>\n                            <th><i class=\"bi bi-door-open\"></i>   Bedrooms:</th>\n                            <td>{{ newHouse.Bedrooms }}</td>\n                        </tr>\n                        <tr>\n                            <th><i class=\"bi bi-people\"></i>   Guests:</th>\n                            <td>{{ newHouse.Guests }}</td>\n                        </tr>\n                        <tr>\n                            <th><i class=\"bi bi-person\"></i>   Owner:</th>\n                            <td>{{ newHouse.User.FirstName }} {{ newHouse.User.LastName }}, {{ newHouse.User.Email }} </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n            <div class=\"inner\">\n                <div class=\"card\">\n                    <h3>Choose dates and order here!</h3>\n                    <table class=\"table table-borderless\">\n                        <tbody>\n                            <tr>\n                                <th>FROM:</th>\n                                <th>TO:</th>\n                            </tr>\n                            <tr>\n                                <td>\n                                    <!-- Input field for start date -->\n                                    <input type=\"date\" id=\"startDate\" name=\"trip_start\"\n                                           [value]=\"startDateMin\" [min]=\"startDateMin\" max=\"2025-12-31\"\n                                           (change)=\"updateDays()\" #startDateInput />\n                                </td>\n                                <td>\n                                    <!-- Input field for end date -->\n                                    <input type=\"date\" id=\"endDate\" name=\"trip_end\"\n                                           [min]=\"endDateMinString\" [value]=\"endDateMinString\" max=\"2025-12-31\"\n                                           (change)=\"updateDays()\" #endDateInput />\n                                </td>\n                            </tr>\n                            <tr id=\"validate\">\n                                <td>\n                                    <span class=\"text-danger\" #validationText *ngIf=\"invalidDates\">\n                                        The start date must be earlier than end date\n                                    </span>\n                                </td>\n                            </tr>\n                            <tr class=\"info\" *ngIf=\"!invalidDates\">\n                                <th><p><i class=\"bi bi-cloud-sun\"></i>   Number of nights:</p></th>\n                                <td><p id=\"nightsNr\">{{ numberOfNights }}</p></td>\n                            </tr>\n                            <tr class=\"info\" *ngIf=\"!invalidDates\">\n                                <th><p><i class=\"bi bi-cash-coin\"></i>   TOTAL PRICE: </p></th>\n                                <td><p id=\"totalPrice\">{{ totalPrice }}</p></td>\n                                <input type=\"hidden\" name=\"inTotalPrice\" id=\"inTotalPrice\" />\n                            </tr>\n                            <tr class=\"info\" *ngIf=\"!invalidDates\">\n                                <td><button id=\"makeOrder\" class=\"btn btn-primary\">Order</button></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\nimport { IHouse } from '../house';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { HouseService } from '../houses.service';\nimport { IUser } from '../../users/user';\n\n@Component({\n  selector: 'app-details', // Specify the selector for the component\n  templateUrl: './details.component.html', // Path to the HTML template\n  styleUrls: ['./details.component.css'] // Array of CSS stylesheets\n})\n\nexport class DetailsComponent implements OnInit {\n  @ViewChild('startDateInput') startDateInput!: ElementRef;\n  @ViewChild('endDateInput') endDateInput!: ElementRef;\n  startDateMin: string = new Date().toISOString().split('T')[0]; // Current date in YYYY-MM-DD format\n  endDateMin: Date = new Date(this.startDateMin);\n  endDateMinString: string = '';\n  newHouse: IHouse = {} as IHouse; // Adjust the type according to your house object structure\n  newUser: IUser = {} as IUser;\n  houseId: number = -1;\n  numberOfNights = 1;\n  totalPrice = 0;\n  invalidDates: boolean = false;\n  baseImgUrl: string;\n  numberOfFiles: number = 0;\n\n  constructor(private _router: Router,\n    private _houseService: HouseService,\n    private _route: ActivatedRoute) {\n    this.baseImgUrl = \"/assets/images/\";\n  }\n\n  ngOnInit(): void {\n    this._route.params.subscribe(params => {\n      this.houseId = + params['id'];\n      this.getHouse(this.houseId);\n\n      console.log(\"Address to le house: \", this.newHouse.Address);\n\n\n      this.endDateMin.setDate(this.endDateMin.getDate() + 1); // Add one day\n      this.endDateMinString = new Date(this.endDateMin).toISOString().split('T')[0]; // Current date in YYYY-MM-DD format\n    });\n  }\n\n\n\n  getHouse(houseId: number) {\n    this._houseService.getHouseById(houseId)\n      .subscribe(\n        (house: any) => {\n          console.log('retreived house: ', house);\n          console.log('retreived user: ', house.user);\n          this.newHouse = house;\n          this.newHouse.User = house.user;\n          this.totalPrice = this.newHouse.Price;\n          // this.updateDays();\n          this.getNumberOfFiles(this.newHouse.Address);\n          console.log(\"New House: \", this.newHouse);\n        },\n        (error: any) => {\n          console.error('Error loading house for edit: ', error);\n        }\n      );\n  }\n\n  getNumberOfFiles(address: string) {\n    if (this.newHouse && this.newHouse.Address) {\n      this._houseService.getNumberOfFiles(this.newHouse.Address).subscribe(count => {\n        this.numberOfFiles = count;\n        console.log(\"Number of images: \", count);\n      });\n    }\n  }\n\n  isObjectEmpty(obj: any): boolean {\n    return Object.keys(obj).length === 0;\n  }\n\n  // Function to handle date changes in the order area\n  updateDays(): void {\n    const startDateValue = (this.startDateInput.nativeElement as HTMLInputElement).value;\n    const endDateValue = (this.endDateInput.nativeElement as HTMLInputElement).value;\n    const newstartDate = new Date(startDateValue);\n    const newendDate = new Date(endDateValue);\n\n    // Calculate the difference in milliseconds\n    const differenceInMs = newendDate.getTime() - newstartDate.getTime();\n\n    // Convert milliseconds to days\n    const differenceInDays = Math.ceil(differenceInMs / (1000 * 60 * 60 * 24));\n\n\n    // Check if the date difference is negative, if it is, type out error message\n    if (differenceInDays <= 0) {\n      this.invalidDates = true;\n      this.totalPrice = 0;\n      this.numberOfNights = 0;\n    } else {\n      // Change the values on the screen if values are valid\n      this.invalidDates = false;\n      this.totalPrice = differenceInDays * this.newHouse.Price;\n      this.numberOfNights = differenceInDays;\n    }\n\n    console.log(\"Date update\");\n    console.log(\"Start date\", startDateValue);\n    console.log(\"End date\", endDateValue);\n    console.log('Difference in days:', differenceInDays);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}